# MirageGen - –õ–æ–∫–∞–ª—å–Ω—ã–π –í–∏–¥–µ–æ-–ê–≤–∞—Ç–∞—Ä

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–π AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º**

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞ "[–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤–∏–¥–µ–æ-–∞–≤–∞—Ç–∞—Ä–∞](https://hackathon.edisai.tech/)" (–ù–ò–Ø–£ –ú–ò–§–ò, 2025).

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: [https://github.com/Hausmaster333/MirageGen](https://github.com/Hausmaster333/MirageGen)

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

MirageGen ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–¥–µ–æ-–∞–≤–∞—Ç–∞—Ä–∞, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–≥–æ –¥–∏–∞–ª–æ–≥ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ open-source –º–æ–¥–µ–ª–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ—á–∏, –∞–Ω–∞–ª–∏–∑–∞ —ç–º–æ—Ü–∏–π, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≥—É–± –∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–≤–∏–∂–µ–Ω–∏–π.

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- **–î–∏–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**: –ë–µ—Å–µ–¥–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º
- **–°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–≥–æ –∞—É–¥–∏–æ
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—É–±**: –¢–æ—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏–π –≥—É–± —Å —Ñ–æ–Ω–µ–º–∞–º–∏ —Ä–µ—á–∏
- **–ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏–π**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏–π –≥–æ–ª–æ–≤—ã –∏ —Ç–µ–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ —ç–º–æ—Ü–∏–π –±–µ—Å–µ–¥—ã
- **–ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: Chunked streaming –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤

## ü§ñ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏

### 1. Large Language Model (LLM)

- **–ú–æ–¥–µ–ª—å**: `qwen2.5:7b-instruct-q5_K_M`
- **–ü—Ä–æ–≤–∞–π–¥–µ—Ä**: Ollama
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: [Qwen2.5 –Ω–∞ Ollama](https://ollama.com/library/qwen2.5)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

### 2. Text-to-Speech (TTS)

- **–ú–æ–¥–µ–ª—å**: `Silero TTS v5_ru`
- **–ì–æ–ª–æ—Å**: Xenia (–∂–µ–Ω—Å–∫–∏–π)
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: [Silero Models](https://github.com/snakers4/silero-models)
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: 48kHz sample rate, CPU inference
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–∏–Ω—Ç–µ–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–π —Ä–µ—á–∏

### 3. Lip Sync

- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç**: `Rhubarb Lip Sync v1.13.0`
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: [Rhubarb Lip Sync GitHub](https://github.com/DanielSWolf/rhubarb-lip-sync)
- **–ú–µ—Ç–æ–¥**: Phonetic recognition
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è blendshapes –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–≤–∏–∂–µ–Ω–∏–π –≥—É–±

### 4. Motion & Sentiment Analysis

- **–ú–æ–¥–µ–ª—å**: `blanchefort/rubert-base-cased-sentiment`
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: [HuggingFace](https://huggingface.co/blanchefort/rubert-base-cased-sentiment)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –æ–∫—Ä–∞—Å–∫–∏ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∞–Ω–∏–º–∞—Ü–∏–π

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–û–°**: Linux / macOS / Windows (—Å WSL2)
- **Python**: 3.11 –∏–ª–∏ –≤—ã—à–µ
- **GPU**: NVIDIA GeForce RTX 4070 Ti (12GB VRAM) –∏–ª–∏ –≤—ã—à–µ
- **CPU**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è ‚â•3.5 –ì–ì—Ü
- **RAM**: –ú–∏–Ω–∏–º—É–º 16 –ì–ë
- **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç**: –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ —É–∫–∞–∑–∞–Ω—ã –≤ —Ñ–∞–π–ª–µ [`pyproject.toml`](pyproject.toml), –∏—Ö —Ç–æ—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –≤ [`uv.lock`](uv.lock).

–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

**Web Framework:**

- `fastapi>=0.115.0` - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API framework
- `uvicorn[standard]>=0.32.0` - ASGI —Å–µ—Ä–≤–µ—Ä
- `websockets>=13.0` - WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- `python-multipart>=0.0.9` - –û–±—Ä–∞–±–æ—Ç–∫–∞ multipart –∑–∞–ø—Ä–æ—Å–æ–≤

**Data Validation:**

- `pydantic>=2.10.0` - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- `pydantic-settings>=2.6.0` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

**LLM:**

- `ollama>=0.4.0` - –ö–ª–∏–µ–Ω—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö LLM –º–æ–¥–µ–ª–µ–π

**TTS (Silero V5):**

- `omegaconf>=2.3.0` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

**Audio Processing:**

- `librosa>=0.10.0` - –ê–Ω–∞–ª–∏–∑ –∞—É–¥–∏–æ
- `torchaudio>=2.5.0` - PyTorch –∞—É–¥–∏–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞
- `soundfile>=0.12.0` - –ß—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤
- `pydub>=0.25.0` - –ê—É–¥–∏–æ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏
- `numpy>=1.26.0` - –ß–∏—Å–ª–µ–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

**Sentiment Analysis:**

- `transformers>=4.46.0` - HuggingFace Transformers
- `torch>=2.5.0` - PyTorch –¥–ª—è ML –º–æ–¥–µ–ª–µ–π
- `sentencepiece>=0.2.0` - –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è
- `accelerate>=0.34.0` - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Transformers

**Utilities:**

- `loguru>=0.7.0` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `python-dotenv>=1.0.0` - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `pyyaml>=6.0` - YAML –ø–∞—Ä—Å–∏–Ω–≥
- `aiofiles>=24.1.0` - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
- `nvidia-ml-py>=13.590.44` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ GPU

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### 1.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ uv (–º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤)

```
# Linux/macOS
curl -LsSf https://astral.sh/uv/install.sh | sh

# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

#### 1.2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama

```
# Linux
curl -fsSL https://ollama.com/install.sh | sh

# macOS/Windows
# –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ —Å https://ollama.com/download/
```

#### 1.3. –ó–∞–≥—Ä—É–∑–∫–∞ LLM –º–æ–¥–µ–ª–∏

```
ollama pull qwen2.5:7b-instruct-q5_K_M
```

#### 1.4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/Hausmaster333/MirageGen.git
cd MirageGen

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç uv.lock)
uv sync
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Rhubarb Lip Sync

#### Linux

```
wget https://github.com/DanielSWolf/rhubarb-lip-sync/releases/download/v1.13.0/Rhubarb-Lip-Sync-1.13.0-Linux.zip
unzip Rhubarb-Lip-Sync-1.13.0-Linux.zip -d assets/rhubarb/
mv assets/rhubarb/Rhubarb-Lip-Sync-1.13.0-Linux/rhubarb assets/rhubarb/
chmod +x assets/rhubarb/rhubarb
```

#### macOS

```
wget https://github.com/DanielSWolf/rhubarb-lip-sync/releases/download/v1.13.0/Rhubarb-Lip-Sync-1.13.0-macOS.zip
unzip Rhubarb-Lip-Sync-1.13.0-macOS.zip -d assets/rhubarb/
mv assets/rhubarb/Rhubarb-Lip-Sync-1.13.0-macOS/rhubarb assets/rhubarb/
chmod +x assets/rhubarb/rhubarb
```

#### Windows

```
# –°–∫–∞—á–∞—Ç—å –≤—Ä—É—á–Ω—É—é —Å GitHub releases –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –≤ assets/rhubarb/
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

#### 3.1. –ó–∞–ø—É—Å–∫ Ollama —Å–µ—Ä–≤–µ—Ä–∞

```
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
ollama serve
```

#### 3.2. –ó–∞–ø—É—Å–∫ backend API

```
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
uv run avatar-server

# –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:8000
# API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ http://localhost:8000/docs
```

#### 3.3. –ó–∞–ø—É—Å–∫ frontend (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```
cd frontend
npm install
npm run dev

# Frontend –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:3000
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç comprehensive test suite —Å unit –∏ integration —Ç–µ—Å—Ç–∞–º–∏. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ [`pyproject.toml`](pyproject.toml).

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```
uv run pytest
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

#### API —Ç–µ—Å—Ç—ã

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ REST API endpoints –∏ middleware:

```
uv run pytest tests/test_api/ -v
```

#### LLM —Ç–µ—Å—Ç—ã

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Ollama:

```
# Mock —Ç–µ—Å—Ç—ã (–±—ã—Å—Ç—Ä—ã–µ, –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ LLM)
uv run pytest tests/test_llm/test_ollama_provider.py -v

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–π Ollama)
uv run pytest tests/test_llm/test_ollama_integration.py -v -s -m integration
```

#### TTS —Ç–µ—Å—Ç—ã

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏ (Silero, XTTS) –∏ –∞—É–¥–∏–æ —É—Ç–∏–ª–∏—Ç:

```
uv run pytest tests/test_tts/ -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–≤–∏–∂–∫–∏
uv run pytest tests/test_tts/test_silero_engine.py -v
uv run pytest tests/test_tts/test_audio_utils.py -v
uv run pytest tests/test_tts/test_factory.py -v
```

#### Lipsync —Ç–µ—Å—Ç—ã

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ blendshapes –∏ Rhubarb –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

```
uv run pytest tests/test_lipsync/ -v
```

#### Motion —Ç–µ—Å—Ç—ã

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π –∏ sentiment analysis:

```
uv run pytest tests/test_motion/ -v
```

#### Pipeline —Ç–µ—Å—Ç—ã

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ pipeline –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```
uv run pytest tests/test_pipeline/ -v
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å coverage

```
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
uv run pytest --cov=src/avatar --cov-report=html

# –û—Ç–∫—Ä—ã—Ç—å –æ—Ç—á–µ—Ç: htmlcov/index.html
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
MirageGen/
‚îú‚îÄ‚îÄ src/avatar/              # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ api/                 # FastAPI endpoints –∏ middleware
‚îÇ   ‚îú‚îÄ‚îÄ llm/                 # LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏ chunking
‚îÇ   ‚îú‚îÄ‚îÄ tts/                 # TTS engines (Silero, XTTS)
‚îÇ   ‚îú‚îÄ‚îÄ lipsync/             # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è blendshapes
‚îÇ   ‚îú‚îÄ‚îÄ motion/              # –ê–Ω–∏–º–∞—Ü–∏—è –∏ sentiment analysis
‚îÇ   ‚îú‚îÄ‚îÄ pipeline/            # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ schemas/             # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ config/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (models_config.yaml)
‚îú‚îÄ‚îÄ tests/                   # Unit –∏ integration —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_api/           # –¢–µ—Å—Ç—ã API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ test_llm/           # –¢–µ—Å—Ç—ã LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_tts/           # –¢–µ—Å—Ç—ã TTS engines
‚îÇ   ‚îú‚îÄ‚îÄ test_lipsync/       # –¢–µ—Å—Ç—ã lip sync
‚îÇ   ‚îú‚îÄ‚îÄ test_motion/        # –¢–µ—Å—Ç—ã –∞–Ω–∏–º–∞—Ü–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ test_pipeline/      # –¢–µ—Å—Ç—ã pipeline
‚îú‚îÄ‚îÄ assets/                  # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ rhubarb/            # Rhubarb executable
‚îÇ   ‚îî‚îÄ‚îÄ animations/         # Preset –∞–Ω–∏–º–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ frontend/               # Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ pyproject.toml          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ uv.lock                 # –¢–æ—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ ARCHITECTURE.md         # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–µ–ª–µ–π –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ [`src/avatar/config/models_config.yaml`](src/avatar/config/models_config.yaml):

- **LLM**: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, max tokens, system prompt
- **TTS**: –í—ã–±–æ—Ä speaker, sample rate, —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏
- **Lipsync**: –ü—É—Ç—å –∫ Rhubarb executable
- **Motion**: –ü—É—Ç—å –∫ –∞–Ω–∏–º–∞—Ü–∏—è–º –∏ sentiment –º–æ–¥–µ–ª–∏
- **API**: Host, port, CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (LLM, TTS, Lipsync, Motion) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ interface pattern –¥–ª—è –ª–µ–≥–∫–æ–π –∑–∞–º–µ–Ω—ã
2. **Streaming**: Chunked streaming –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ latency –≤ –¥–∏–∞–ª–æ–≥–µ
3. **Factory pattern**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. **Type safety**: –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å Pydantic schemas
5. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: Comprehensive test coverage —Å mock –∏ integration —Ç–µ—Å—Ç–∞–º–∏

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [`ARCHITECTURE.md`](ARCHITECTURE.md).

## üìù API Endpoints

### POST `/api/chat`

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –∞–≤–∞—Ç–∞—Ä–∞ (—Ç–µ–∫—Å—Ç + –∞—É–¥–∏–æ + –∞–Ω–∏–º–∞—Ü–∏—è)

### POST `/api/stream/chat`

–ü–æ—Ç–æ–∫–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å chunked streaming

### GET `/api/health`

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8000/docs –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

## üèÜ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏—è–º —Ö–∞–∫–∞—Ç–æ–Ω–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å —É—á–µ—Ç–æ–º –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –æ—Ü–µ–Ω–∫–∏ —Ö–∞–∫–∞—Ç–æ–Ω–∞:

1. **Head –∏ Body Motion**: Preset –∞–Ω–∏–º–∞—Ü–∏–∏ —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ sentiment analysis
2. **–í—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–≥–µ—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ —á–µ—Ä–µ–∑ animation mixer
3. **–õ–∏–ø—Å–∏–Ω–∫**: Phonetic-based —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Rhubarb —Å blendshape mapping
4. **–ö–∞—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å–∞**: Silero TTS v5 —Å –≤—ã—Å–æ–∫–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–≥–æ —Å–∏–Ω—Ç–µ–∑–∞
5. **–ò–Ω–Ω–æ–≤–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, streaming pipeline, sentiment-based motion generation

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Pre-commit Hooks

```
uv tool install pre-commit --with pre-commit-uv --force-reinstall
uv tool run pre-commit install
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ª–∏–Ω—Ç–∏–Ω–≥

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **just** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á.

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ just:**

```
# macOS
brew install just

# Linux
cargo install just

# Windows
scoop install just
```

**–ö–æ–º–∞–Ω–¥—ã:**

```
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
just format

# –õ–∏–Ω—Ç–∏–Ω–≥ –∏ –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (ruff)
just lint
```

---

**–î–∞—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: –î–µ–∫–∞–±—Ä—å 2025
**–•–∞–∫–∞—Ç–æ–Ω**: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤–∏–¥–µ–æ-–∞–≤–∞—Ç–∞—Ä–∞"
**–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä**: –û–û–û ¬´–≠–∫–æ—Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ü–∏—Ñ—Ä–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è¬ª
